<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
<header>
    <nav class="mb-2 navbar navbar-expand-lg bg-dark d-flex flex-row px-3 justify-content-between">
        <div class="d-flex flex-row">
<!--            <div class="text-white fs-4 fw-bold pe-3" th:text="${principal.getUsername()}"></div>-->
<!--            <div class="text-white fs-4 pe-3">with roles:</div>-->
<!--            <div class="text-white fs-4 pe-3" th:each="role : ${principal.getAuthorities()}" th:text="${role}"></div>-->
        </div>
<!--        <form th:action="@{/logout}" th:method="POST">-->
<!--            <input class="s-5 btn btn-dark text-white" type="submit" value="Logout">-->
        </form>
    </nav>
</header>
<div class="container">
    <div class="row">
        <div class="col-2">
            <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                <a class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" href="#v-pills-home" role="tab"
                   aria-controls="v-pills-home" aria-selected="true">Admin</a>
                <a class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill" href="#v-pills-profile" role="tab"
                   aria-controls="v-pills-profile" aria-selected="false">User</a>

            </div>
        </div>
        <div class="col-10">
            <!--  навигация внутри-->
            <div class="card">
                <div class="h1 p-2 .pt-4 text-dark ">Admin panel</div>
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#home" role="tab"
                               aria-controls="home" aria-selected="true">User table</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab"  role="tab"
                               aria-controls="new_user" aria-selected="false">New User</a>
                        </li>

                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content" id="myTabContent">
                        <div class="h2 tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            All Users
                            <table id="usersTable" class="table table-striped">
                                <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Age</th>
                                    <th scope="col">Role</th>
                                    <th scope="col">Edit</th>
                                    <th scope="col">Delete</th>
                                </tr>
                                </thead>
                                <tbody>
<!--                                <tr class="fs-5" th:each="user : ${users}">-->
<!--                                    <td th:text="${user.getId()}"></td>-->
<!--                                    <td th:text="${user.getEmail()}"></td>-->
<!--                                    <td th:text="${user.getAge()}"></td>-->
<!--                                    <td th:text="${user.getRoles()}"></td>-->
<!--                                    <td>-->
<!--                                        <a class="btn btn-primary text-white " data-bs-toggle="modal"-->
<!--                                           th:href="${'#editModal' + user.getId()}"> Edit </a>-->
<!--                                        &lt;!&ndash;                            Окно редактирования&ndash;&gt;-->
<!--                                        <div class="modal" th:id="${'editModal'+ user.getId()}" tabindex="-1"-->
<!--                                             wfd-invisible="true">-->
<!--                                            <div class="modal-dialog">-->
<!--                                                <div class="modal-content">-->
<!--                                                    <div class="modal-header">-->
<!--                                                        <button type="button" class="btn-close"-->
<!--                                                                aria-label="Close"></button>-->
<!--                                                    </div>-->
<!--                                                    <div class="modal-body">-->
<!--                                                        <form th:method="PATCH"-->
<!--                                                              th:action="@{/admin/{id}(id=${user.getId()})}">-->
<!--                                                            <div class="row justify-content-center">-->
<!--                                                                <div class="col-6">-->
<!--                                                                    <label for="id"-->
<!--                                                                           class="form-text text-black"><b>ID</b></label>-->
<!--                                                                    <input type="text" class="form-control"-->
<!--                                                                           th:value="${user.getId()}"-->
<!--                                                                           name="id"-->
<!--                                                                           id="id" disabled>-->

<!--                                                                    <label for="email"-->
<!--                                                                           class="form-text text-black"><b>Email</b></label>-->
<!--                                                                    <input type="text" class="form-control"-->
<!--                                                                           th:value="${user.getEmail()}"-->
<!--                                                                           name="email"-->
<!--                                                                           id="email"/>-->
<!--                                                                    <label for="age"-->
<!--                                                                           class="form-text text-black"><b>Возраст</b></label>-->
<!--                                                                    <input type="number" class="form-control"-->
<!--                                                                           th:value="${user.getAge()}"-->
<!--                                                                           name="age"-->
<!--                                                                           id="age">-->
<!--                                                                    <label for="password"-->
<!--                                                                           class="form-text text-black">-->
<!--                                                                        <b>Пароль</b>-->
<!--                                                                    </label>-->
<!--                                                                    <input type="password" class="form-control"-->
<!--                                                                           th:value="${user.getPassword()}"-->
<!--                                                                           name="password"-->
<!--                                                                           id="password">-->
<!--                                                                    <label class="form-text text-black"><b>Роль</b>-->
<!--                                                                        <select class="form-select" size="2"-->
<!--                                                                                multiple-->
<!--                                                                                aria-label="multiple select example"-->
<!--                                                                                name="roles">-->
<!--                                                                            <option th:each="role : ${roles}"-->
<!--                                                                                    th:value="${role.getId()}"-->
<!--                                                                                    th:text="${role.getAuthority()}">-->
<!--                                                                            </option>-->
<!--                                                                        </select>-->
<!--                                                                    </label>-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                            <div class="modal-footer">-->
<!--                                                                <button type="button" class="btn btn-secondary"-->
<!--                                                                        data-bs-dismiss="modal"> Close-->
<!--                                                                </button>-->
<!--                                                                <button type="submit" class="btn btn-primary">Edit-->
<!--                                                                </button>-->
<!--                                                            </div>-->
<!--                                                        </form>-->
<!--                                                    </div>-->

<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->

<!--                                    </td>-->
<!--                                    <td>-->
<!--                                        <a class="btn btn-danger text-white " data-bs-toggle="modal"-->
<!--                                           th:href="${'#deleteModal' + user.getId()}"> Delete </a>-->
<!--                                        &lt;!&ndash;                            <form th:method="GET" th:action=@{admin/{id} (id=${user.getId()})}">&ndash;&gt;-->

<!--                                        &lt;!&ndash;                                        </form>&ndash;&gt;-->
<!--                                        &lt;!&ndash;                                        Модальное окно удаления&ndash;&gt;-->
<!--                                        <div class="modal" th:id="${'deleteModal'+ user.getId()}" tabindex="-1"-->
<!--                                             wfd-invisible="true">-->
<!--                                            <div class="modal-dialog">-->
<!--                                                <div class="modal-content">-->
<!--                                                    <div class="modal-header">-->
<!--                                                        <button type="button" class="btn-close"-->
<!--                                                                aria-label="Close" data-bs-dismiss="modal"></button>-->
<!--                                                    </div>-->
<!--                                                    <div class="modal-body">-->
<!--                                                        <form th:method="DELETE"-->
<!--                                                              th:action="@{/admin/{id}(id=${user.getId()})}">-->
<!--                                                            <div class="row justify-content-center">-->
<!--                                                                <div class="col-6">-->
<!--                                                                    <label for="id"-->
<!--                                                                           class="form-text text-black"><b>ID</b></label>-->
<!--                                                                    <input type="text" class="form-control"-->
<!--                                                                           th:value="${user.getId()}"-->
<!--                                                                           name="id"-->
<!--                                                                           id="deleteId" disabled>-->

<!--                                                                    <label for="email"-->
<!--                                                                           class="form-text text-black"><b>Email</b></label>-->
<!--                                                                    <input type="text" class="form-control"-->
<!--                                                                           th:value="${user.getEmail()}"-->
<!--                                                                           name="email"-->
<!--                                                                           id="deleteEmail" disabled>-->
<!--                                                                    <label for="age"-->
<!--                                                                           class="form-text text-black"><b>Возраст</b></label>-->
<!--                                                                    <input type="number" class="form-control"-->
<!--                                                                           th:value="${user.getAge()}"-->
<!--                                                                           name="age"-->
<!--                                                                           id="deleteAge" disabled>-->
<!--                                                                    <label for="password"-->
<!--                                                                           class="form-text text-black">-->
<!--                                                                        <b>Пароль</b>-->
<!--                                                                    </label>-->
<!--                                                                    <input type="password" class="form-control"-->
<!--                                                                           th:value="${user.getPassword()}"-->
<!--                                                                           name="password"-->
<!--                                                                           id="deletePassword" disabled>-->
<!--                                                                    <label class="form-text text-black"><b>Роль</b>-->
<!--                                                                        <select class="form-select" size="2"-->
<!--                                                                                multiple-->
<!--                                                                                aria-label="multiple select example"-->
<!--                                                                                name="roles" disabled>-->
<!--                                                                            <option th:each="role : ${roles}"-->
<!--                                                                                    th:value="${role.getId()}"-->
<!--                                                                                    th:text="${role.getAuthority()}">-->
<!--                                                                            </option>-->
<!--                                                                        </select>-->
<!--                                                                    </label>-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                            <div class="modal-footer">-->
<!--                                                                <button type="button" class="btn btn-secondary"-->
<!--                                                                        data-bs-dismiss="modal"> Close-->
<!--                                                                </button>-->
<!--                                                                <button type="submit" class="btn btn-danger">Delete-->
<!--                                                                </button>-->
<!--                                                            </div>-->
<!--                                                        </form>-->
<!--                                                    </div>-->

<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </td>-->
<!--                                </tr>-->

                                </tbody>
                            </table>
                        </div>
                        <!--                            Добавление юзера-->
                        <div class="h2 tab-pane" id="new_user" role="tabpanel"
                             aria-labelledby="new_user-tab">
                            Add new user
                            <form id="user-form" th:method="POST" th:action="@{/admin}" th:object="${user}">
                                <div class="d-flex justify-content-center">
                                    <div class="mx-auto">
                                        <div class="row mb-2">
                                            <label class="form-label d-flex justify-content-center fw-bold fs-5 mb-0"> </label>
<!--                                                   for="email">Email:-->
                                            <input class="form-control d-flex justify-content-center" type="text"
                                                   th:field="*{email}" id="new_email"
                                                   placeholder="введите email"/>
                                        </div>
                                        <div class="row mb-2">
                                            <label class="form-label d-flex justify-content-center fw-bold fs-5 mb-0"> </label>
<!--                                                   for="password">Password: </label>-->
                                            <input class="form-control d-flex justify-content-center" type="password"
                                                   th:field="*{password}" id="new_password"
                                                   placeholder="введите пароль"/>
                                        </div>
                                        <div class="row mb-2">
                                            <label class="form-label d-flex justify-content-center fw-bold fs-5 mb-0"> </label>
<!--                                                   for="age">Age</label>-->
                                            <input class="form-control d-flex justify-content-center" type="text"
                                                   th:field="*{age}" id="new_age" placeholder="введите возраст"/>
                                            <div style="color: red" th:if="${#fields.hasErrors('age')}"
                                                 th:errors="*{age}">
                                                age
                                                error
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <label class="form-label d-flex justify-content-center fw-bold fs-5 mb-0">Роль</label>
                                            <select class="form-select" size="2"
                                                    multiple
                                                    aria-label="multiple select example"
                                                    name="roles">
                                                <option th:each="role : ${roles}"
                                                        th:value="${role.getId()}"
                                                        th:text="${role.getAuthority()}">
                                                </option>
                                            </select>

                                        </div>
                                        </p>
                                        <!--                                <input type="submit" value="Add new user"/>-->
                                        <button type="submit" class="btn btn-success justify-content-center">Add new
                                            user
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>


                    <!--                    <div class="tab-content" id="myTabContent_newUser">-->

                    <!--                        <div class="tab-pane fade" id="profile2" role="tabpanel" aria-labelledby="profile-tab"></div>-->
                </div>
            </div>

        </div>
    </div>

</div>


</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous">
</script>
<script src="./js/main.js"></script>
</body>
</html>
